plugins {
	id 'java' // Needed for libs building without xp.apps plugin
	id 'maven' // Needed for uploadArchives to work locally
	id 'com.enonic.defaults' version '2.0.0'
	id 'com.moowork.node' version '1.2.0'
}

dependencies {
	compile "com.enonic.xp:lib-content:${xpVersion}"
	compile "com.enonic.xp:lib-portal:${xpVersion}"
}

repositories {
	mavenLocal()
	jcenter()
}

node {
	version '10.13.0'
	download true
}

task wrapper(type: Wrapper) {
	gradleVersion = '4.10.2'
}

task transpile(type: NpmTask) {
	args = ['run', 'build']
}

task watch(type: NpmTask) {
	args = ['run', 'watch']
}

processResources {
	exclude '*'
}

processResources.mustRunAfter transpile
processResources.dependsOn transpile
